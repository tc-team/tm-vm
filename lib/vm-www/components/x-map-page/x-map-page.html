<polymer-element name="x-map-page">
	<template>
		<link rel="stylesheet" type="text/css" href="css/style.css"></link>
		
		<core-ajax id="deleteMarker"
	        auto = "false"
	        url="http://localhost:3000/target/{{mapInfo.activeMarker.targetId}}"
	        method="DELETE"
	        handleAs="json"
	        withCredentials="true"
	        on-core-response="{{handleResDelMark}}">
	    </core-ajax> 

		<geo-location latitude="{{localLat}}" longitude="{{localLong}}" watchpos></geo-location>
		
		<x-map latitude="{{localLat}}"
			   longitude="{{localLong}}"
			   marks="{{marks}}"
			   mapInfo="{{mapInfo}}"
			   disableDefaultUI
			   dragEvents
			   mouseEvents
			   clickEvents>

				<template repeat="{{marker in marks}}">
					<x-map-marker latitude="{{marker.latitude}}"
								  longitude="{{marker.longitude}}"
								  title="{{marker.name}}"
								  targetId="{{marker.id}}"
								  draggable="true"
								  mouseEvents
								  clickEvents>

						<div id="info_window">
							<b>title</b><br>
							<p>Lat: "{{marker.latitude}}"<br>
							   Lng: "{{marker.longitude}}"
							</p>
							
						</div>

					</x-map-marker>
				</template>
		</x-map>

		<template if="{{mapInfo.activeMarker}}">
				<x-card>
					<p>
						Latitude: {{mapInfo.activeMarker.latitude}}<br>
						Longitude: {{mapInfo.activeMarker.longitude}}
					</p>
						<core-icon-button raised id="deleteButton" icon="delete" on-click="{{executeDelete}}"></core-icon-button>
					
				</x-card>			
	 	</template>

	</template>
	<script src="js/script.js"></script>
</polymer-element>