<polymer-element name="x-memo-recorder" attributes="reload memoService">
    <template>
        <link rel="stylesheet" href="css/style.css">
        
        <core-ajax id="ajax"
            url="{{memoService}}"
            method="POST"
            contentType="multipart/form-data"
            handleAs="json"
            withCredentials="true"
            on-core-response="{{handleResponse}}">
        </core-ajax>
        

        <div id="error" hidden?="{{isHidden}}" horizontal center-justified layout>
            <core-icon icon="error"></core-icon>  
            <span>To save the memo you need to buy extra space</span>
        </div>
        
        <div horizontal layout>
            <paper-input-decorator floatingLabel label="Name">
                <input id="nameInput" is="core-input" type="text" value="{{memoName}}" autofocus></input>
            </paper-input-decorator>
            <span flex></span>
            <span id="recTime">RECORDING: {{recTime}}</span>
        </div>
    
        <x-audio src="{{audioRecUrl}}" name="{{memoName}}" id="recAudio" disabled="true">
        </x-audio>

        <div id="recorderControls" horizontal center-justified layout>
            <paper-fab mini icon="delete" id="deleteRecord" on-click="{{deleteRecord}}"></paper-fab>
            <paper-fab icon="av:mic" id="startRecord" on-click="{{startRecord}}"></paper-fab>
            <paper-fab mini icon="save" id="save" on-click="{{saveRecord}}"></paper-fab>
        </div>

    </template>
    <script src="js/voice-recorder.js"></script>
    <script src="js/script.js"></script>
</polymer-element>